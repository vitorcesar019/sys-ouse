$(function(){(function(a){a.each(function(){var a={title:$.trim($(this).text())};$(this).data("eventObject",a)})})($("#external-events div.external-event"));var a=new Date,b=a.getDate(),c=a.getMonth(),d=a.getFullYear(),e=FullCalendar.Calendar,f=document.getElementById("external-events"),g=document.getElementById("calendar"),h=new FullCalendar.Calendar(g,{locale:"pt-br",plugins:["bootstrap","interaction","dayGrid","timeGrid","list"],header:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay, listDay, listWeek"},views:{dayGridMonth:{buttonText:"M"},timeGridWeek:{buttonText:"S"},timeGridDay:{buttonText:"D"},listDay:{buttonText:"Lista Dia"},listWeek:{buttonText:"Lista Semana"}},navLinks:!0,defaultView:"dayGridMonth",allDaySlot:!1,eventLimit:!0,themeSystem:"bootstrap",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"08:00",endTime:"17:00"},minTime:"08:00:00",maxTime:"17:00:00",eventSources:[{url:"/agenda/calendario/listar",type:"POST",backgroundColor:"#FFC107",borderColor:"#FFC107"}],eventClick:function(a){a.jsEvent.preventDefault(),$("#modalViewEvent #idEventView").text(a.event.id),$("#modalViewEvent #title").text(a.event.title),$("#modalViewEvent #start").text(a.event.extendedProps.dateStart+" "+a.event.extendedProps.hourStart+"h"),$("#modalViewEvent #end").text(a.event.extendedProps.dateStart+" "+a.event.extendedProps.hourEnd+"h"),document.getElementById("P").remove(),document.getElementById("R").remove(),"P"==a.event.extendedProps.status?$("#modalViewEvent #status").append(`<span id="P" class="badge badge-warning">Pendente</span> <span id="R" class="badge badge-success" style="display:none">Realizado</span>`):$("#modalViewEvent #status").append(`<span id="R" class="badge badge-success">Realizado</span> <span id="P" class="badge badge-warning" style="display:none">Pendente</span>`),$("#modalViewEvent #name").text(a.event.extendedProps.name+" "+a.event.extendedProps.surname),""==a.event.extendedProps.cellphone?($("#modalViewEvent #dtCellphone").hide(),$("#modalViewEvent #ddCellphone").hide()):($("#modalViewEvent #cellphone").text(a.event.extendedProps.cellphoneFormatted),$("#modalViewEvent #cellphone").attr("href",`tel: +55${a.event.extendedProps.cellphone}`)),""==a.event.extendedProps.telephone?($("#modalViewEvent #dtTelephone").hide(),$("#modalViewEvent #ddTelephone").hide()):($("#modalViewEvent #telephone").text(a.event.extendedProps.telephoneFormatted),$("#modalViewEvent #telephone").attr("href",`tel: +55${a.event.extendedProps.telephone}`)),""==a.event.extendedProps.email?($("#modalViewEvent #dtEmail").hide(),$("#modalViewEvent #ddEmail").hide()):($("#modalViewEvent #email").text(a.event.extendedProps.email),$("#modalViewEvent #email").attr("href",`malito:${a.event.extendedProps.email}`));var b=a.event.extendedProps.logradouro+", "+a.event.extendedProps.number+" - "+a.event.extendedProps.bairro+" "+a.event.extendedProps.localidade+" - "+a.event.extendedProps.uf+" "+a.event.extendedProps.cep,c=a.event.extendedProps.logradouro+"+"+a.event.extendedProps.number+"+"+a.event.extendedProps.bairro+"+"+a.event.extendedProps.localidade+"+"+a.event.extendedProps.uf+"+"+a.event.extendedProps.cep;if($("#modalViewEvent #address").text(b),$("#modalViewEvent #address").attr("href",`https://www.google.com/maps/search/?api=1&query=${c}`),a.event.extendedProps.edifice&&a.event.extendedProps.block&&""!=a.event.extendedProps.apartment?($("#modalViewEvent #edifice").text(a.event.extendedProps.edifice),$("#modalViewEvent #block").text(a.event.extendedProps.block),$("#modalViewEvent #apartment").text(a.event.extendedProps.apartment)):($("#modalViewEvent #dtEdifice").hide(),$("#modalViewEvent #edifice").hide(),$("#modalViewEvent #dtBlock").hide(),$("#modalViewEvent #block").hide(),$("#modalViewEvent #dtApartment").hide(),$("#modalViewEvent #apartment").hide()),""==a.event.extendedProps.streetCondominium?($("#modalViewEvent #dtStreetCondominium").hide(),$("#modalViewEvent #streetCondominium").hide(),$("#modalViewEvent #divStreetCondominiumEdit").hide(),$("#modalViewEvent #divNumberEdit").hide()):($("#modalViewEvent #streetCondominium").text(a.event.extendedProps.streetCondominium),$("#modalViewEvent #optionCondominiumEdit").prop("checked",!0),$("#modalViewEvent #divNumberEdit").show(),$("#modalViewEvent #divStreetCondominiumEdit").show(),$("#modalViewEvent #numberEdit").val(a.event.extendedProps.number),$("#modalViewEvent #streetCondominiumEdit").val(a.event.extendedProps.streetCondominium)),""==a.event.extendedProps.observation?($("#modalViewEvent #divObservation").hide(),$("#modalViewEvent #dtObservation").hide()):$("#modalViewEvent #observation").text(a.event.extendedProps.observation),$("#modalViewEvent #idEvent").val(a.event.id),$("#modalViewEvent #idBudget").val(a.event.extendedProps.idBudget),"Realizar Or\xE7amento"===a.event.title?($("#modalViewEvent #optionVoltarObra").hide(),$("#modalViewEvent #optionInicioObra").hide()):"Voltar na Obra"===a.event.title?($("#modalViewEvent #optionRealizarOrcamento").hide(),$("#modalViewEvent #optionInicioObra").hide()):($("#modalViewEvent #optionRealizarOrcamento").hide(),$("#modalViewEvent #optionVoltarObra").hide()),$("#modalViewEvent #selectionTitleEdit").val(a.event.title),$("#modalViewEvent #startDateEdit").val(a.event.start.toLocaleString()),$("#modalViewEvent #startTimeEdit").val(a.event.extendedProps.hourStart),$("#modalViewEvent #endTimeEdit").val(a.event.extendedProps.hourEnd),$("#modalViewEvent #nameEdit").val(a.event.extendedProps.name),$("#modalViewEvent #surnameEdit").val(a.event.extendedProps.surname),$("#modalViewEvent #cellphoneEdit").val(a.event.extendedProps.cellphone),$("#modalViewEvent #telephoneEdit").val(a.event.extendedProps.telephone),$("#modalViewEvent #emailEdit").val(a.event.extendedProps.email),$("#modalViewEvent #cepEdit").val(a.event.extendedProps.cep),$("#modalViewEvent #logradouroEdit").val(a.event.extendedProps.logradouro),$("#modalViewEvent #bairroEdit").val(a.event.extendedProps.bairro),$("#modalViewEvent #localidadeEdit").val(a.event.extendedProps.localidade),$("#modalViewEvent #ufEdit").val(a.event.extendedProps.uf),""==a.event.extendedProps.number?$("#modalViewEvent #divNumberEdit").hide():($("#modalViewEvent #optionHomeEdit").prop("checked",!0),$("#modalViewEvent #divNumberEdit").show(),$("#modalViewEvent #numberEdit").val(a.event.extendedProps.number)),a.event.extendedProps.edifice&&a.event.extendedProps.block&&""!=a.event.extendedProps.apartment?($("#modalViewEvent #optionBuildingEdit").prop("checked",!0),$("#modalViewEvent #divEdificeEdit").show(),$("#modalViewEvent #divBlockEdit").show(),$("#modalViewEvent #divApartmentEdit").show(),$("#modalViewEvent #edificeEdit").val(a.event.extendedProps.edifice),$("#modalViewEvent #blockEdit").val(a.event.extendedProps.block),$("#modalViewEvent #apartmentEdit").val(a.event.extendedProps.apartment)):($("#modalViewEvent #divEdificeEdit").hide(),$("#modalViewEvent #divBlockEdit").hide(),$("#modalViewEvent #divApartmentEdit").hide()),$("#modalViewEvent #observationEdit").val(a.event.extendedProps.observation),varDate=new Date,hour=varDate.getHours(),5>hour)var d="Boa noite, ";else if(8>hour)var d="Bom dia, ";else if(12>hour)var d="Bom dia, ";else if(18>hour)var d="Boa tarde, ";else var d="Boa noite, ";if(a.event.extendedProps.edifice&&a.event.extendedProps.block&&""!=a.event.extendedProps.apartment)var e=d+a.event.extendedProps.name+" "+a.event.extendedProps.surname+"! %0AVoc\xEA agendou uma visita para o *Dia:* "+a.event.extendedProps.dateStart+" das "+a.event.extendedProps.hourStart+" \xE0s "+a.event.extendedProps.hourEnd+" no *Endere\xE7o:* "+b+" *Edif\xEDcio:* "+a.event.extendedProps.edifice+" *Bloco:* "+a.event.extendedProps.block+" *Apartamento:* "+a.event.extendedProps.apartment+" . At\xE9 mais, Gesso Cidade Nova.";else var e=d+a.event.extendedProps.name+" "+a.event.extendedProps.surname+"! %0AVoc\xEA agendou uma visita para o *Dia:* "+a.event.extendedProps.dateStart+" das "+a.event.extendedProps.hourStart+" \xE0s "+a.event.extendedProps.hourEnd+" no *Endere\xE7o:* "+b+". At\xE9 mais, Gesso Cidade Nova.";$("#btnWpp").attr("href","https://api.whatsapp.com/send?phone=+55"+a.event.extendedProps.cellphone+"&text="+e),$("#modalViewEvent").modal("show")},selectable:!0,select:function(a){$("#modalRegisterEvent #startDateRegister").val(a.start.toLocaleString()),$("#modalRegisterEvent").modal("show")},editable:!0,extraParams:function(){return{cachebuster:new Date().valueOf()}}});h.render()});function confirmDeleteEvent(){var a=$("#modalViewEvent #idEventView").text(),b=$("#modalViewEvent #title").text();$("#modalViewEvent").modal("hide"),"Realizar Or\xE7amento"===b?$.confirm({title:"Aten\xE7\xE3o!",content:"Realmente deseja excluir esse evento e o or\xE7amento veiculado a ele?",type:"red",buttons:{omg:{text:"Sim",btnClass:"btn-red",action:function(){$.ajax({url:"/agenda/calendario/apagar",method:"POST",data:{idEventBudget:a},success:function(a){a.sit?location.reload():$("#msg-cad").html(a.msg)},error:function(){toastr.error("Erro: dados n\xE3o enviados ao servidor, contate o administrador do sistema!")}})}},close:{text:"N\xE3o",action:function(){$.confirm({title:"Aten\xE7\xE3o!",content:"Realmente deseja excluir somente o evento?",type:"red",buttons:{omg:{text:"Sim",btnClass:"btn-red",action:function(){$.ajax({url:"/agenda/calendario/apagar",method:"POST",data:{idEvent:a},success:function(a){a.sit?location.reload():$("#msg-cad").html(a.msg)},error:function(){toastr.error("Erro: dados n\xE3o enviados ao servidor, contate o administrador do sistema!")}})}},close:{text:"N\xE3o"}}})}}}}):$.confirm({title:"Aten\xE7\xE3o!",content:"Realmente deseja excluir esse evento?",type:"red",buttons:{omg:{text:"Sim",btnClass:"btn-red",action:function(){$.ajax({url:"/agenda/calendario/apagar",method:"POST",data:{idEvent:a},success:function(a){a.sit?location.reload():$("#msg-cad").html(a.msg)},error:function(){toastr.error("Erro: dados n\xE3o enviados ao servidor, contate o administrador do sistema!")}})}},close:{text:"N\xE3o"}}})}$(document).ready(function(){$(".btn-edit-event").on("click",function(){$(".divViewEvent").slideToggle(),$(".formedit").slideToggle()}),$(".btn-cancel-edit").on("click",function(){$(".formedit").slideToggle(),$(".divViewEvent").slideToggle()})});function optionsScheduleTime(){var a=document.getElementById("optionScheduleTimeYes").checked;a?($("#divTitleRegister").show(),$("#divStartDateRegister").show(),$("#divStartTimeRegister").show(),$("#divEndTimeRegister").show()):($("#divTitleRegister").hide(),$("#divStartDateRegister").hide(),$("#divStartTimeRegister").hide(),$("#divEndTimeRegister").hide())}window.onload=function(){document.getElementById("selectionTitleRegister").addEventListener("change",function(){"Voltar na Obra"==this.value||"In\xEDcio de Obra"==this.value?($("#divClientRegister").show(),$("#divNameRegister").hide(),$("#divSurnameRegister").hide(),$("#divCellphoneRegister").hide(),$("#divTelephoneRegister").hide(),$("#divEmaileRegister").hide(),$("#divCepRegister").hide(),$("#divStreetRegister").hide(),$("#divNeighBorhoodRegister").hide(),$("#divCityRegister").hide(),$("#divStateRegister").hide(),$("#divTypeResidenceRegister").hide(),$("#divEdificeRegister").hide(),$("#divBlockRegister").hide(),$("#divApartmentRegister").hide(),$("#divStreetCondominiumRegister").hide(),$("#divNumberRegister").hide(),$("#divScheduleTimeNo").hide()):($("#divClientRegister").hide(),$("#divNameRegister").show(),$("#divSurnameRegister").show(),$("#divCellphoneRegister").show(),$("#divTelephoneRegister").show(),$("#divEmaileRegister").show(),$("#divCepRegister").show(),$("#divStreetRegister").show(),$("#divNeighBorhoodRegister").show(),$("#divCityRegister").show(),$("#divStateRegister").show(),$("#divTypeResidenceRegister").show(),$("#divScheduleTimeNo").show())})};function optionTypeResidenceRegister(){var a=document.getElementById("optionHomeRegister").checked,b=document.getElementById("optionCondominiumRegister").checked;a?($("#edificeRegister").val(""),$("#blockRegister").val(""),$("#apartmentRegister").val(""),$("#streetCondominiumRegister").val(""),$("#numberRegister").val(""),$("#divEdificeRegister").hide(),$("#divBlockRegister").hide(),$("#divApartmentRegister").hide(),$("#divStreetCondominiumRegister").hide(),$("#divNumberRegister").show()):b?($("#edificeRegister").val(""),$("#blockRegister").val(""),$("#apartmentRegister").val(""),$("#streetCondominiumRegister").val(""),$("#numberRegister").val(""),$("#divEdificeRegister").hide(),$("#divBlockRegister").hide(),$("#divApartmentRegister").hide(),$("#divStreetCondominiumRegister").show(),$("#divNumberRegister").show()):($("#edificeRegister").val(""),$("#blockRegister").val(""),$("#apartmentRegister").val(""),$("#streetCondominiumRegister").val(""),$("#numberRegister").val(""),$("#divEdificeRegister").show(),$("#divBlockRegister").show(),$("#divApartmentRegister").show(),$("#divStreetCondominiumRegister").hide(),$("#divNumberRegister").hide())}function clearCep(){$("#modalViewEvent #logradouroEdit").val(""),$("#modalViewEvent #bairroEdit").val(""),$("#modalViewEvent #localidadeEdit").val(""),$("#modalViewEvent #ufEdit").val("")}function callbackCep(a){"erro"in a?(clearCep(),alert("CEP n\xE3o encontrado.")):($("#modalViewEvent #logradouroEdit").val(a.logradouro),$("#modalViewEvent #bairroEdit").val(a.bairro),$("#modalViewEvent #localidadeEdit").val(a.localidade),$("#modalViewEvent #ufEdit").val(a.uf))}function pesquisaCep(a){var b=a.replace(/\D/g,"");if(""!=b){if(/^[0-9]{8}$/.test(b)){var c=document.createElement("script");c.src="//viacep.com.br/ws/"+b+"/json/?callback=callbackCep",document.body.appendChild(c)}else clearCep(),alert("Formato de CEP inv\xE1lido.")}else clearCep(),alert("Informe o CEP.")}function optionTypeResidenceEdit(){var a=document.getElementById("optionHomeEdit").checked,b=document.getElementById("optionCondominiumEdit").checked;a?($("#edificeEdit").val(""),$("#blockEdit").val(""),$("#apartmentEdit").val(""),$("#streetCondominiumEdit").val(""),$("#numberEdit").val(""),$("#divEdificeEdit").hide(),$("#divBlockEdit").hide(),$("#divApartmentEdit").hide(),$("#divStreetCondominiumEdit").hide(),$("#divNumberEdit").show()):b?($("#edificeEdit").val(""),$("#blockEdit").val(""),$("#apartmentEdit").val(""),$("#streetCondominiumEdit").val(""),$("#numberEdit").val(""),$("#divEdificeEdit").hide(),$("#divBlockEdit").hide(),$("#divApartmentEdit").hide(),$("#divStreetCondominiumEdit").show(),$("#divNumberEdit").show()):($("#edificeEdit").val(""),$("#blockEdit").val(""),$("#apartmentEdit").val(""),$("#streetCondominiumEdit").val(""),$("#numberEdit").val(""),$("#divEdificeEdit").show(),$("#divBlockEdit").show(),$("#divApartmentEdit").show(),$("#divStreetCondominiumEdit").hide(),$("#divNumberEdit").hide())}